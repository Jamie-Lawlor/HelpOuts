
<input class="hide" id="job_id" value="{{ job_data.id }}" disabled />

<div class="container py-5 pb-5">
  <div class="row g-5">

    <div class="col-lg-7">
      <div
        class="d-flex align-items-center mb-4"
      >
            <img
              src="/static/images/community_image.png"
              width="60"
              height="60"
              class="rounded-circle me-3"
            />
           <div>
              <h1 class="fw-bold h2 mb-0">{{ job_data.job_title }}</h1>
                 <input
          type="text"
          id="edit_title"
          class="form-control ms-2"
          value="{{ job_data.job_title }}"
          style="display: none"
        />
              <p class="text-muted mb-0">Hosted by Mens Shed Dundalk</p>
              <p><strong>Posted:</strong> {{ job_data.created_date }}</p>
            </div>
          </div>
          

         <h4 class="fw-bold mb-3">Details</h4>

        <div class="p-3 bg-light rounded-3 mb-5">
        <p id="job_desc_display"> {{ job_data.job_description }}</p>
           <textarea
          id="edit_description"
          class="form-control mt-2"
          rows="3"
          style="display: none"
        >
        {{ job_data.job_description }}
        </textarea>
         </div>

               <hr class="my-5">

         <h4 class="fw-bold mb-3">Location Map</h4>
         <div class="rounded-4 overflow-hidden border mb-3" style="height: 250px; border-radius:20px;">
          <img src="/static/images/maps_sample.png" width="100%" height="100%" style="border-radius:20px;">
         </div>
    </div>

      <div class="col-lg-5">
        <div class="sticky-top" style="top:20px;">
          <div class="rounded-4 overflow-hidden mb-3 shadow-sm">
              <img src="/static/images/park.png" class="img-fluid rounded-4 w-100 mb-3" style="max-height:400px; object-fit:cover; border-radius:20px;" alt="job image">
          </div>

          <div class="card border-0 shadow-sm rounded-4 mb-3">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-2">
                    <img
          src="/static/images/location_icon.svg"
          width="18"
          height="18"
          class="me-2"
        />
                <h5 class="fw-bold mb-0"> 
        <span id="job_area_display" class="fw-bold">{{ job_data.area }}</span>
            <input
          type="text"
          id="edit_area"
          class="form-control ms-2"
          value="{{ job_data.area }}"
          style="display: none"
          style="display: none"
        />
        </h5></div>
                <p class="text-muted small mb-0">Community Park · Address details...</p>
            </div>
          </div>

                    <div class="card border-0 shadow-sm rounded-4 mb-3">
            <div class="card-body p-4 d-flex align-items-center">
                  <div class="bg-light p-3 rounded-3 me-3 text-primary">
                    <i class="bi bi-calendar-event"></i>
                  </div>
                  <p style="color:red;">This job requires urgent attention.</p>
                </div>
              </div>

                
 {% if role == "chairperson" %}
  <div
    class="card border-0 shadow-sm"
    style="border-radius: 20px; border-left: 5px solid #3d6978 !important"
  >
  <div class="card-body p-4">
      <h5 class="fw-bold mb-3" style="color: #3d6978">Manage Job</h5>     

       <div id="manage-job" class="d-grid gap-2">
        <button onclick="open_edit()" class="btn btn-teal rounded-pill btn-block  ms-auto py-2 fw-bold mb-3">
        <i class="bi bi-pencil-square me-2"></i>  Edit Post
        </button>
        <button
          class="btn btn-danger rounded-pill btn-block  ms-auto py-2 fw-bold mb-3"
          onclick="delete_post_data()"
        >
          Delete Post
        </button>
      </div>

      <div id="edit-job-details" style="display: none" class="d-grid gap-2">
        <button
          class="btn-block signup-btn ms-auto py-2 fw-bold mb-3"
          id="edit_submit"
          onclick="send_updated_data()"
        >
              <img src="/static/images/save.svg" width="20" class="me-1" />
          Save Changes
        </button>
  </div>
  </div>
  </div>
  {% endif %}
  </div>
  </div>
  </div>
  </div>

  
{%  if role == "helper" %}
<div class="fixed-bottom bg-white border-top p-3 shadow-lg" id="public-actions">
  <div class="container d-flex justify-content-between align-items-center">
    <div>
      <h6 class="fw-bold mb-0">
        {{ job_data.job_title }}
      </h6>
      <span class="text-muted small">{{ job_data.area }} · Mens Shed Dundalk</span>
    </div>
    <div class="d-flex gap-2">
      <a href="/inbox/" class="btn btn-teal rounded-pill btn-block  ms-auto py-2 fw-bold mb-3">Message</a>
      <button class="btn-block signup-btn ms-auto py-2 fw-bold mb-3"  type="button"
            id="job_accepted"
            class="btn helper-button-orange px-4"
            onclick="accept_job()"
          >Offer to Help</button>
    </div>
  </div>
</div>
{% endif %}

<script type="text/javascript">
  registerServiceWorker(
    "/static/js/service_worker.js",
    `{{ vapid_key }}`,
    "/api/push-subscriptions",
  );
</script>


{% extends "base.html" %}
{% block title %}Community Profile{% endblock %}

{% block body %}
<div class="d-flex align-items-stretch">
         {% include "includes/navbar_community.html" %}

           <main class="flex-grow-1" id="main" style="transition:0.3s;">
          <button id="openSideBarBtn" class="shadow m-3" style="display: none;" onclick="openSideBar()">
            <i class="bi bi-list"></i>
          </button>

<div class="profile-page-header pb-5 ">
        <div class="header-bg d-flex align-items-start p-3">

        </div>
        <div class="container" style="margin-top: -80px;">
                <div class="row">
                        <div class="col-lg-8">
                <div class="card shadow-sm border-0 p-4 mb-4" style="border-radius:15px;">
                        <div class="text-center">
                                <img src="/static/images/community_image.png"
                                        class="rounded-3 border border-4 border-white shadow-sm" style="width: 120px; height:120px; object-fit:cover; margin-top:-60px;">
                                <h2 class="fw-bold mb-0 text-dark">{{ community.name}}</h2>
                                <p class="text-muted mb-0"><img src="/static/images/location_icon.svg" width="20" height="20"> {{ community.area }}</p>
                                <div class="d-flex gap-2">
                                <button class="signup-btn btn  btn-sm w-25 mt-2 d-lg-none flex-grow-1 rounded-pill" style="background-color: #D57A44; color: white;">
                                        Join
                                </button>
                                <a href="/message_chat" class="btn btn-teal btn-sm w-25 mt-2 d-lg-none flex-grow-1 rounded-pill">Message</a>
                                </div>
                        </div>
                        
                        <div class="py-3 border-top">
                                <h6 class="fw-bold text-uppercase small text-muted d-sm-none d-md-block d-none d-sm-block">What we're about</h6>
                                <p class="mb-0 text-secondary d-sm-none d-md-block d-none d-sm-block">We are a group dedicated to improving {{ community.area }}. <br> Join us to help out with local projects, community events and skill-sharing.</p>
                        </div>

                                <div class="row g-2 mt-2">
                                        <div class="col-4">
                                                <div class="bg-light p-2 rounded-3 text-center">
                                                <span class="d-block fw-bold fs-5"> 100</span>
                                                <small class="text-muted text-uppercase"
                                                        style="font-size: 10px;">Helpers</small>
                                                </div>
                                        </div>
                                        <div class="col-4">
                                                 <div class="bg-light p-2 rounded-3 text-center">
                                                <span class="d-block fw-bold fs-5"> 3</span>
                                                <small class="text-muted text-uppercase"
                                                        style="font-size: 10px;">Projects</small>
                                                </div>
                                        </div>
                                          <div class="col-4">
                                                 <div class="bg-light p-2 rounded-3 text-center">
                                                <span class="d-block fw-bold fs-5"> 4</span>
                                                <small class="text-muted text-uppercase"
                                                        style="font-size: 10px;">Jobs</small>
                                                </div>
                                        </div>
                                </div>
                        </div>
<!-- <div class="d-flex d-lg-none bg-light p-1 rounded-pill mb-4" style="border: 1px solid #ddd;">
        <button id="mobileToggleProjects" class="btn btn-sm flex-grow-1 rounded-pill fw-bold bg-white shadow-sm" onclick="showSection('projects')">
                Projects
        </button>
        <button id="mobileToggleJobs" class="btn btn-sm flex-grow-1 rounded-pill fw-bold bg-white shadow-sm" onclick="showSection('jobs')">
                Jobs
        </button>
</div> -->

<!-- <div id="mobile-placeholder-profile" class="text-center py-5 d-lg-none">
        <p class="text-muted">Select <strong> Projects</strong> or <strong>Jobs</strong></p>
</div> -->

                <div id="projects-section">
                <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="fw-bold mb-0">Active Projects</h5>
                        <a href="#" class="small text-decoration-none text-dark">View All</a>
                </div>

                <div class="d-flex flex-nowrap overflow-auto pb-4 gap-3 no-scrollbar">
                        <a href="" class="text-decoration-none text-dark">
                                <div class="card border-0 shadow-sm p-2" style="min-width: 160px">
                                        <img src="/static/images/park.png" class="rounded"
                                                style="height: 120px; object-fit:cover;">
                                        <div class="pt-2 text-center">
                                                <p class="mb-0 fw-bold small">
                                                        {{ projects[0].project_title }}
                                                </p>
                                                <small class="tex-muted" style="font-size:10px;">15 Jobs
                                                        Available</small>
                                        </div>
                                </div>
                        </a>
                        {% if projects|length > 1 %}
                        <a href="" class="text-decoration-none text-dark">
                                <div class="card border-0 shadow-sm p-2" style="min-width: 160px">
                                        <img src="/static/images/social_club.png" class="rounded"
                                                style="height: 120px; object-fit:cover;">
                                        <div class="pt-2 text-center">
                                                <p class="mb-0 fw-bold small">
                                                {{ projects[1].project_title }}
                                                </p>
                                                <small class="tex-muted" style="font-size:10px;">4 Jobs
                                                        Available</small>
                                        </div>
                                </div>
                        </a>

                        <a href="" class="text-decoration-none text-dark">
                                <div class="card border-0 shadow-sm p-2" style="min-width: 160px">
                                        <img src="/static/images/food_drive.png" class="rounded"
                                                style="height: 120px; object-fit:cover;">
                                        <div class="pt-2 text-center">
                                                <p class="mb-0 fw-bold small">
                                                {{ projects[2].project_title }}
                                                </p>
                                                <small class="tex-muted" style="font-size:10px;">3 Jobs
                                                        Available</small>
                                        </div>
                                </div>
                        </a>
                        {% endif %}
                        {% if projects|length > 3 %}
                        {% for i in range(3, projects|length) %}
                        <a href="" class="text-decoration-none text-dark">
                                <div class="card border-0 shadow-sm p-2" style="min-width: 160px">
                                        <img src="/static/images/default_image.jpg" class="rounded"
                                                style="height: 120px; object-fit:cover;">
                                        <div class="pt-2 text-center">
                                                <p class="mb-0 fw-bold small">
                                                {{ projects[i].project_title }}
                                                </p>
                                                <small class="tex-muted" style="font-size:10px;">5 Jobs
                                                        Available</small>
                                        </div>
                                </div>
                        </a>
                        {% endfor %}
                        {% endif %}
                </div>
                </div>

                <h5 class="fw-bold mt-4">Help Needed (Jobs)</h5>
                <div id="jobs-section">
                <div class="row g-3">
                        {% for i in range(jobs|length) %}
                        <div class="col-12">
                        <a href="/view_post/{{ jobs[i].job_title }}"
                                class="text-decoration-none">
                                <div class="card border-0 shadow-sm p-3 h-100" style="border-radius: 12px; border-left: 4px solid #85D6D6 !important;">
                                <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                        <h6 class="mb-1 fw-bold text-dark">{{ jobs[i].job_title }}</h6>
                                        {% for j in range(project_names|length) %}
                                        {% if project_names[j].id == jobs[i].project_id %}
                                        <span
                                                class="text-muted">{{ project_names[j].project_title }}</span>
                                        {% endif %}
                                        {% endfor %}
                                        </div>
                                       <span class="badge bg-success rounded-pill px-3">Available</span>
                                </div>
                                </div>
                        </a>
                        </div>
                        {% endfor %}
                </div>
                </div>
                </div>

                <div class="col-lg-4">
                        <div class="sticky-top" style="top:20px;">
                                <div class="card border-0 shadow-sm p-4 mb-4" style="border-radius: 15px;">
                                        <button class="btn-block signup-btn ms-auto py-2 fw-bold mb-3 w-100 d-sm-none d-md-block d-none d-sm-block" type="button">Join Community</button>
                                        <p class="text-muted small text-center mb-0 d-sm-none d-md-block d-none d-sm-block">Become a Helper of {{ community.name }}</p>
                                </div>

                                <div class="card border-0 shadow-sm p-4 mb-4" style="border-radius: 15px;">
                                   <h6 class="fw-bold mb-3">
                                                Information
                                        </h6>
                <div class="d-flex flex-wrap gap-2 mb-3">
                        <img src="/static/images/heart-solid.svg" width="20" height="20" class="mr-2">
                        <span class="small ml-4">
                              GoFundMe Link
                        </span>
                </div>
                                </div>

                                <div class="card border-0 shadow-sm p-4" style="border-radius: 15px;">
                                        <h6 class="fw-bold mb-3">
                                                Contact
                                        </h6>
                                        <div class="d-flex align-items-center mb-2">
                                                <img src="/static/images/email_icon.svg" width="20" height="20" class="mr-2">
                                                <span class="small ml-4">  janedoe@email.com</span>
                                        </div>
                                                <a href="/message_chat" class="btn btn-teal btn-sm w-100 mt-2 d-sm-none d-md-block d-none d-sm-block">Message</a>
                                </div>
                                
                        </div>
                </div>

        </div>
</div>
</main>
</div>
{% endblock %}